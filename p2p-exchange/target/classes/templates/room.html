<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${room.name} + ' - P2P Exchange'">Room - P2P Exchange</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>
<body>
    <header>
        <!-- Similar header -->
    </header>
    
    <main class="room-container">
        <div class="room-header">
            <h2 th:text="${room.name}">Room Name</h2>
            <div class="room-meta">
                <span th:text="'Created by ' + ${room.ownerName}">Created by User</span> •
                <span th:text="${room.members.size()} + ' members'">5 members</span> •
                <span th:text="${room.sharedFiles.size()} + ' files'">12 files</span>
            </div>
            <div class="room-actions">
                <button id="share-room-btn" class="button primary">Share Room Link</button>
                <button id="upload-file-btn" class="button secondary">Upload File</button>
            </div>
        </div>
        
        <div class="room-body">
            <div class="files-panel">
                <h3>Shared Files</h3>
                <div class="files-list">
                    <div class="file-item" th:each="file : ${roomFiles}">
                        <div class="file-icon" th:data-type="${file.type}"></div>
                        <div class="file-details">
                            <h4 th:text="${file.name}">filename.txt</h4>
                            <p class="file-meta">
                                <span th:text="${file.size}">2.5 MB</span> •
                                <span th:text="'Shared by ' + ${file.ownerName}">Shared by User</span> •
                                <span th:text="${#dates.format(file.uploadDate, 'MMM d, yyyy')}">Jun 3, 2025</span>
                            </p>
                        </div>
                        <div class="file-actions">
                            <button class="download-btn" th:data-id="${file.id}">Download</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="members-panel">
                <h3>Members</h3>
                <div class="members-list">
                    <div class="member-item" th:each="member : ${roomMembers}">
                        <div class="member-avatar">
                            <img th:src="@{/img/default-avatar.png}" alt="User Avatar">
                            <span class="status-indicator" 
                                  th:classappend="${member.online} ? 'online' : 'offline'"></span>
                        </div>
                        <div class="member-details">
                            <h4 th:text="${member.username}">Username</h4>
                            <p class="member-status" th:text="${member.online} ? 'Online' : 'Offline'">Status</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Download Progress Modal -->
    <div id="download-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Downloading File</h3>
            <div id="download-progress" class="progress-container">
                <p>Downloading: <span id="download-file-name"></span></p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 0%"></div>
                </div>
                <p class="progress-text">0%</p>
                <p class="transfer-speed">0 KB/s</p>
                <button id="cancel-download" class="button secondary">Cancel</button>
            </div>
        </div>
    </div>
    
    <script th:src="@{/js/room.js}"></script>
    <script th:src="@{/js/file-operations.js}"></script>
    <script th:src="@{/js/websocket-client.js}"></script>
</body>
</html>